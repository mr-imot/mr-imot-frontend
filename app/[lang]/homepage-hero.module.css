/* Mobile-first: FIXED height (not min-height) to prevent Chrome iOS stretching */
.heroSection {
  position: relative;
  overflow: hidden; /* Critical: prevents content from growing beyond shell on mobile */
  display: flex;
  align-items: center;

  /* MOBILE: Use exact height, not min-height. This kills 70% of the stretch.
     Remove env(safe-area-inset-bottom) - it changes during scroll in Chrome.
     Use --fixed-vh for padding calculations, not reactive vh units. */
  height: calc(var(--fixed-vh, 100svh) - var(--header-height, 80px));
  padding-top: clamp(1rem, calc(var(--fixed-vh, 100svh) * 0.025), 2rem);
  padding-bottom: clamp(2rem, calc(var(--fixed-vh, 100svh) * 0.05), 3rem);
}

/* Fallback for very old browsers */
@supports not (height: 100svh) {
  .heroSection {
    height: calc(var(--fixed-vh, 100vh) - var(--header-height, 80px));
    padding-top: clamp(1rem, calc(var(--fixed-vh, 100vh) * 0.025), 2rem);
    padding-bottom: clamp(2rem, calc(var(--fixed-vh, 100vh) * 0.05), 3rem);
  }
}

/* Desktop: Standard behavior (we usually want it to respond to resize here) */
@media (min-width: 1024px) {
  .heroSection {
    /* On desktop, we can use min-height for flexibility */
    min-height: calc(100vh - var(--header-height, 80px) - 50px);
    height: auto; /* Allow natural height on desktop */
    max-height: none;
    overflow: visible; /* Allow overflow on desktop */
    padding-top: clamp(1.5rem, 3vh, 2.5rem);
    padding-bottom: clamp(2.5rem, 6vh, 4rem);
  }
}

/* Smaller screens (13-15 inch laptops): More conservative spacing */
@media (min-width: 768px) and (max-width: 1023px) {
  .heroSection {
    height: calc(var(--fixed-vh, 100vh) - var(--header-height, 80px) - 40px);
    padding-top: clamp(1rem, calc(var(--fixed-vh, 100vh) * 0.02), 1.5rem);
    padding-bottom: clamp(2rem, calc(var(--fixed-vh, 100vh) * 0.05), 3rem);
  }
}

.heroGrid {
  width: 100%;
  gap: clamp(1rem, 2vw, 2rem);
}

@media (min-width: 1024px) {
  .heroGrid {
    height: 100%;
  }
}

.heroContent {
  display: flex;
  flex-direction: column;
  transform: translateZ(0);
  /* Ensure content can shrink if needed */
  min-height: 0;
}

@media (min-width: 1024px) {
  .heroContent {
    justify-content: center;
  }
}

/* Smaller viewports: Reduce spacing between elements */
@media (min-width: 768px) and (max-height: 900px) {
  .heroContent {
    gap: clamp(0.5rem, 1.5vh, 1rem);
  }
}

.heroTitle {
  line-height: 1.1 !important;
  padding-bottom: 0.1em !important;
  letter-spacing: -0.02em;
  /* Fluid typography that adapts to viewport */
  font-size: clamp(2rem, 4vw + 1rem, 4.75rem) !important;
}

@media (min-width: 768px) {
  .heroTitle {
    line-height: 1 !important;
    /* Better scaling for desktop - uses both viewport width and height */
    font-size: clamp(2.25rem, 3.5vw + 1.5rem, 4.75rem) !important;
  }
}

/* Smaller viewports: Reduce title size to fit better */
@media (min-width: 768px) and (max-height: 900px) {
  .heroTitle {
    font-size: clamp(2rem, 3vw + 1rem, 3.5rem) !important;
    margin-bottom: clamp(0.25rem, 1vh, 0.5rem);
  }
}

/* Very wide screens: prevent title from getting too large */
@media (min-width: 1920px) {
  .heroTitle {
    font-size: clamp(3rem, 4vw, 4.75rem) !important;
  }
}

.heroSubtitle {
  font-size: clamp(0.9rem, 1.5vw + 0.5rem, 1.15rem);
  line-height: 1.6;
  max-width: clamp(100%, 520px, 90vw);
  font-family: var(--font-inter), system-ui, sans-serif;
  color: #4b5563;
}

/* Desktop: Adaptive subtitle width */
@media (min-width: 768px) {
  .heroSubtitle {
    max-width: clamp(400px, 45vw, 520px);
    font-size: clamp(1rem, 1.2vw + 0.5rem, 1.15rem);
  }
}

/* Smaller viewports: Reduce subtitle spacing */
@media (min-width: 768px) and (max-height: 900px) {
  .heroSubtitle {
    margin-top: clamp(0.5rem, 1.5vh, 1rem) !important;
    font-size: clamp(0.95rem, 1vw + 0.5rem, 1.1rem);
  }
}

/* Desktop: Fluid CTA button sizing */
@media (min-width: 768px) {
  .heroCta {
    margin-top: clamp(1rem, 2vh, 2rem) !important;
  }
  
  .heroCta button {
    padding: clamp(0.875rem, 1.5vh, 1.25rem) clamp(1.5rem, 3vw, 2.5rem);
    font-size: clamp(1rem, 1.2vw + 0.5rem, 1.75rem) !important;
  }
}

/* Smaller viewports: Reduce CTA spacing and size */
@media (min-width: 768px) and (max-height: 900px) {
  .heroCta {
    margin-top: clamp(0.75rem, 1.5vh, 1.25rem) !important;
  }
  
  .heroCta button {
    padding: clamp(0.75rem, 1.2vh, 1rem) clamp(1.25rem, 2.5vw, 2rem);
    font-size: clamp(0.95rem, 1vw + 0.5rem, 1.5rem) !important;
  }
}

.heroVisual {
  display: none;
}

@media (min-width: 1024px) {
  .heroVisual {
    display: flex;
    align-items: center;
    justify-content: flex-end;
  }
}

.heroImage {
  width: auto;
  height: auto;
  object-fit: contain;
  filter: drop-shadow(0 4px 15px rgba(0, 0, 0, 0.1));
  will-change: transform;
  transform: translateZ(0);
  animation: float 6s ease-in-out infinite;
  /* Fluid image sizing that adapts to available space */
  max-width: min(90vw, 800px);
  max-height: min(70vh, 640px);
}

/* Desktop: Better image scaling based on viewport */
@media (min-width: 768px) {
  .heroImage {
    max-width: min(45vw, 800px);
    max-height: min(75vh, 640px);
  }
}

/* Smaller viewports: Reduce image size to fit better */
@media (min-width: 768px) and (max-height: 900px) {
  .heroImage {
    max-width: min(40vw, 600px);
    max-height: min(65vh, 500px);
  }
}

/* Very small viewports (13 inch): Even more conservative */
@media (min-width: 768px) and (max-height: 800px) {
  .heroImage {
    max-width: min(35vw, 500px);
    max-height: min(60vh, 450px);
  }
}

/* Very wide screens: prevent image from getting too large */
@media (min-width: 1920px) {
  .heroImage {
    max-width: 800px;
  }
}

/* Short screens: tighten spacing even more */
@media (max-height: 650px) {
  .heroSection {
    padding-top: 1rem;
    padding-bottom: 2rem;
    height: calc(var(--fixed-vh, 100svh) - var(--header-height, 80px) - 30px);
  }
  
  .heroTitle {
    font-size: clamp(1.75rem, 4vw, 2.5rem) !important;
    margin-bottom: 0.25rem;
  }
  
  .heroSubtitle {
    margin-top: 0.5rem !important;
    font-size: clamp(0.9rem, 1vw + 0.4rem, 1rem);
  }
  
  .heroCta {
    margin-top: 0.75rem !important;
  }
  
  .heroImage {
    max-width: min(35vw, 450px);
    max-height: min(55vh, 400px);
  }
}

.liquidFlowBgCharcoal {
  background: linear-gradient(135deg, rgba(38, 70, 83, 0.1) 0%, rgba(38, 70, 83, 0.2) 50%, rgba(38, 70, 83, 0.1) 100%);
  animation: liquidFlow 2s ease-in-out infinite;
  transform: translateZ(0);
}

.ctaShimmer {
  background: linear-gradient(90deg, transparent 0%, rgba(38, 70, 83, 0.4) 50%, transparent 100%);
  transform: translateX(-100%);
  animation: shimmer 1.5s ease-in-out infinite;
}

@keyframes liquidFlow {
  0%, 100% {
    opacity: 0.1;
    transform: translateZ(0) scale(1);
  }
  50% {
    opacity: 0.2;
    transform: translateZ(0) scale(1.02);
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  50%, 100% {
    transform: translateX(100%);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

/* Snow Effects - Inspired by border-image approach */
.snowAccumulation {
  --overflow-x: 4px;
  content: '';
  position: absolute;
  top: -6px;
  left: calc(var(--overflow-x) * -1);
  width: calc(100% + var(--overflow-x) * 2);
  height: 28px;
  background: 
    /* Base snow layer */
    radial-gradient(ellipse 120% 100% at 50% 0%, 
      rgba(255, 255, 255, 1) 0%, 
      rgba(255, 255, 255, 0.98) 25%,
      rgba(250, 252, 255, 0.92) 50%,
      rgba(245, 250, 255, 0.85) 75%,
      transparent 100%
    ),
    /* Texture layer 1 */
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(255, 255, 255, 0.1) 2px,
      rgba(255, 255, 255, 0.1) 4px
    ),
    /* Texture layer 2 */
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 3px,
      rgba(255, 255, 255, 0.08) 3px,
      rgba(255, 255, 255, 0.08) 6px
    ),
    /* Main gradient */
    linear-gradient(to bottom, 
      rgba(255, 255, 255, 1) 0%, 
      rgba(255, 255, 255, 0.98) 15%,
      rgba(248, 252, 255, 0.95) 35%,
      rgba(240, 250, 255, 0.88) 60%,
      rgba(235, 248, 255, 0.8) 85%,
      rgba(230, 245, 255, 0.7) 100%
    );
  border-radius: 16px 16px 0 0;
  clip-path: polygon(
    0% 100%,
    1.5% 82%,
    4% 95%,
    7% 68%,
    10% 100%,
    13% 85%,
    16% 92%,
    19% 72%,
    22% 98%,
    25% 80%,
    28% 94%,
    31% 75%,
    34% 100%,
    37% 88%,
    40% 96%,
    43% 78%,
    46% 100%,
    49% 90%,
    52% 100%,
    55% 82%,
    58% 97%,
    61% 76%,
    64% 100%,
    67% 86%,
    70% 93%,
    73% 100%,
    76% 84%,
    79% 99%,
    82% 77%,
    85% 100%,
    88% 91%,
    91% 95%,
    94% 100%,
    97% 83%,
    100% 100%,
    100% 0%,
    0% 0%
  );
  box-shadow: 
    0 -4px 12px rgba(255, 255, 255, 0.7),
    0 -2px 6px rgba(255, 255, 255, 0.8),
    inset 0 4px 10px rgba(255, 255, 255, 0.9),
    inset 0 2px 5px rgba(255, 255, 255, 1),
    inset 0 -3px 8px rgba(0, 0, 0, 0.25),
    0 3px 8px rgba(0, 0, 0, 0.2);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  z-index: 5;
  pointer-events: none;
}

.snowAccumulation::before {
  content: '';
  position: absolute;
  top: -2px;
  left: 0;
  right: 0;
  height: 6px;
  background: 
    radial-gradient(ellipse at 20% 50%, rgba(255, 255, 255, 0.95) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(255, 255, 255, 0.9) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 50%, rgba(255, 255, 255, 0.85) 0%, transparent 50%);
  border-radius: 16px 16px 0 0;
  filter: blur(1px);
}

.snowAccumulation::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 15% 25%, rgba(255, 255, 255, 0.5) 0%, transparent 35%),
    radial-gradient(circle at 85% 35%, rgba(255, 255, 255, 0.4) 0%, transparent 35%),
    radial-gradient(circle at 50% 15%, rgba(255, 255, 255, 0.3) 0%, transparent 30%);
  border-radius: 16px 16px 0 0;
  pointer-events: none;
}

.snowAccumulationMobile {
  --overflow-x: 4px;
  content: '';
  position: absolute;
  top: -6px;
  left: calc(var(--overflow-x) * -1);
  width: calc(100% + var(--overflow-x) * 2);
  height: 28px;
  background: 
    /* Base snow layer */
    radial-gradient(ellipse 120% 100% at 50% 0%, 
      rgba(255, 255, 255, 1) 0%, 
      rgba(255, 255, 255, 0.98) 25%,
      rgba(250, 252, 255, 0.92) 50%,
      rgba(245, 250, 255, 0.85) 75%,
      transparent 100%
    ),
    /* Texture layer 1 */
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(255, 255, 255, 0.1) 2px,
      rgba(255, 255, 255, 0.1) 4px
    ),
    /* Texture layer 2 */
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 3px,
      rgba(255, 255, 255, 0.08) 3px,
      rgba(255, 255, 255, 0.08) 6px
    ),
    /* Main gradient */
    linear-gradient(to bottom, 
      rgba(255, 255, 255, 1) 0%, 
      rgba(255, 255, 255, 0.98) 15%,
      rgba(248, 252, 255, 0.95) 35%,
      rgba(240, 250, 255, 0.88) 60%,
      rgba(235, 248, 255, 0.8) 85%,
      rgba(230, 245, 255, 0.7) 100%
    );
  border-radius: 12px 12px 0 0;
  clip-path: polygon(
    0% 100%,
    1.5% 82%,
    4% 95%,
    7% 68%,
    10% 100%,
    13% 85%,
    16% 92%,
    19% 72%,
    22% 98%,
    25% 80%,
    28% 94%,
    31% 75%,
    34% 100%,
    37% 88%,
    40% 96%,
    43% 78%,
    46% 100%,
    49% 90%,
    52% 100%,
    55% 82%,
    58% 97%,
    61% 76%,
    64% 100%,
    67% 86%,
    70% 93%,
    73% 100%,
    76% 84%,
    79% 99%,
    82% 77%,
    85% 100%,
    88% 91%,
    91% 95%,
    94% 100%,
    97% 83%,
    100% 100%,
    100% 0%,
    0% 0%
  );
  box-shadow: 
    0 -4px 12px rgba(255, 255, 255, 0.7),
    0 -2px 6px rgba(255, 255, 255, 0.8),
    inset 0 4px 10px rgba(255, 255, 255, 0.9),
    inset 0 2px 5px rgba(255, 255, 255, 1),
    inset 0 -3px 8px rgba(0, 0, 0, 0.25),
    0 3px 8px rgba(0, 0, 0, 0.2);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
  z-index: 5;
  pointer-events: none;
}

.snowAccumulationMobile::before {
  content: '';
  position: absolute;
  top: -2px;
  left: 0;
  right: 0;
  height: 6px;
  background: 
    radial-gradient(ellipse at 20% 50%, rgba(255, 255, 255, 0.95) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(255, 255, 255, 0.9) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 50%, rgba(255, 255, 255, 0.85) 0%, transparent 50%);
  border-radius: 12px 12px 0 0;
  filter: blur(1px);
}

.snowAccumulationMobile::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: 
    radial-gradient(circle at 15% 25%, rgba(255, 255, 255, 0.5) 0%, transparent 35%),
    radial-gradient(circle at 85% 35%, rgba(255, 255, 255, 0.4) 0%, transparent 35%),
    radial-gradient(circle at 50% 15%, rgba(255, 255, 255, 0.3) 0%, transparent 30%);
  border-radius: 12px 12px 0 0;
  pointer-events: none;
}

/* Icicles - Realistic Ice Effect */
.iciclesContainer {
  height: 22px;
  display: flex;
  justify-content: space-around;
  align-items: flex-end;
  padding: 0 12px;
  z-index: 5;
  position: relative;
  pointer-events: none;
}

.icicle {
  position: relative;
  width: 5px;
  background: 
    /* Horizontal gradient for depth */
    linear-gradient(to right,
      rgba(255, 255, 255, 0.25) 0%,
      rgba(240, 250, 255, 0.45) 25%,
      rgba(255, 255, 255, 0.75) 50%,
      rgba(240, 250, 255, 0.45) 75%,
      rgba(255, 255, 255, 0.25) 100%
    ),
    /* Vertical gradient for ice effect */
    linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.98) 0%,
      rgba(250, 252, 255, 0.95) 10%,
      rgba(240, 250, 255, 0.9) 25%,
      rgba(230, 245, 255, 0.82) 45%,
      rgba(220, 240, 255, 0.72) 65%,
      rgba(200, 230, 250, 0.6) 80%,
      rgba(180, 220, 245, 0.5) 92%,
      rgba(160, 210, 240, 0.4) 100%
    );
  /* Natural icicle shape with tapering */
  clip-path: polygon(
    0% 0%,
    25% 0%,
    50% 3%,
    75% 0%,
    100% 0%,
    100% 88%,
    95% 92%,
    88% 96%,
    80% 98%,
    70% 100%,
    50% 100%,
    30% 100%,
    20% 98%,
    12% 96%,
    5% 92%,
    0% 88%
  );
  box-shadow: 
    0 5px 12px rgba(200, 230, 255, 0.5),
    0 2px 6px rgba(255, 255, 255, 0.6),
    inset -3px 0 6px rgba(0, 0, 0, 0.25),
    inset 3px 0 6px rgba(255, 255, 255, 0.6),
    inset 0 -2px 4px rgba(0, 0, 0, 0.2),
    inset 0 2px 3px rgba(255, 255, 255, 0.5);
  animation: icicleDrip 4.5s ease-in-out infinite;
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
}

.icicle::before {
  content: '';
  position: absolute;
  top: -5px;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 5px;
  background: linear-gradient(to bottom, 
    rgba(255, 255, 255, 0.98) 0%,
    rgba(250, 252, 255, 0.9) 40%,
    rgba(245, 250, 255, 0.8) 100%
  );
  clip-path: polygon(25% 0%, 75% 0%, 100% 100%, 0% 100%);
  box-shadow: 
    inset 0 2px 4px rgba(255, 255, 255, 0.8),
    0 -2px 4px rgba(0, 0, 0, 0.2);
}

.icicle::after {
  content: '';
  position: absolute;
  top: 20%;
  left: 40%;
  width: 2.5px;
  height: 55%;
  background: linear-gradient(to bottom,
    transparent 0%,
    rgba(255, 255, 255, 0.2) 8%,
    rgba(255, 255, 255, 0.6) 25%,
    rgba(255, 255, 255, 0.95) 45%,
    rgba(255, 255, 255, 1) 50%,
    rgba(255, 255, 255, 0.95) 55%,
    rgba(255, 255, 255, 0.6) 75%,
    rgba(255, 255, 255, 0.2) 92%,
    transparent 100%
  );
  border-radius: 1.5px;
  animation: icicleGlint 5.5s ease-in-out infinite;
  filter: blur(0.8px);
}

.icicle1 {
  height: 15px;
  width: 4.5px;
  animation-delay: 0s;
  transform: translateX(-1.5px);
}

.icicle2 {
  height: 20px;
  width: 5.5px;
  animation-delay: 0.5s;
}

.icicle3 {
  height: 17px;
  width: 5px;
  animation-delay: 1s;
  transform: translateX(1px);
}

.icicle4 {
  height: 16px;
  width: 4.5px;
  animation-delay: 1.5s;
  transform: translateX(-1px);
}

.icicle5 {
  height: 19px;
  width: 5.5px;
  animation-delay: 2s;
  transform: translateX(1.5px);
}

@keyframes icicleDrip {
  0%, 100% {
    opacity: 0.96;
    transform: translateY(0) scaleY(1);
  }
  50% {
    opacity: 1;
    transform: translateY(2px) scaleY(1.04);
  }
}

@keyframes icicleGlint {
  0%, 100% {
    opacity: 0.5;
    transform: translateX(0) scaleX(1);
  }
  20% {
    opacity: 0.75;
    transform: translateX(0.3px) scaleX(1.05);
  }
  50% {
    opacity: 1;
    transform: translateX(1px) scaleX(1.25);
  }
  80% {
    opacity: 0.75;
    transform: translateX(0.3px) scaleX(1.05);
  }
}
