@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import palette CSS variables */
@import '../styles/colors.css';

/* ===== ESSENTIAL ANIMATIONS ===== */
@keyframes liquidFlow {
  0%, 100% { opacity: 0.1; transform: translateZ(0) scale(1); }
  50% { opacity: 0.2; transform: translateZ(0) scale(1.02); }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  50%, 100% { transform: translateX(100%); }
}

/* CTA button liquid glass effect */
.liquid-flow-bg-white {
  background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 100%);
  will-change: opacity, transform;
  transform: translateZ(0);
}

.liquid-flow-bg-charcoal {
  background: linear-gradient(135deg, rgba(38,70,83,0.1) 0%, rgba(38,70,83,0.2) 50%, rgba(38,70,83,0.1) 100%);
  will-change: opacity, transform;
  transform: translateZ(0);
}

/* ===== DESIGN TOKENS ===== */
@layer base {
  :root {
    --brand: #264653;
    --brand-ink: #ffffff;
    --ink: #111111;
    --subtle: #6B7280;
    --card: #ffffff;
    --muted: #F4F5F7;
    --ring: rgba(17,24,39,.35);
    --radius: 16px;
    --shadow-card: 0 8px 24px rgba(0,0,0,.08);
    --shadow-hover: 0 12px 28px rgba(0,0,0,.12);
    
    /* ShadCN variables */
    --background: oklch(0.99 0 0);
    --foreground: var(--ink);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0 0 0);
    --popover: oklch(0.99 0 0);
    --popover-foreground: oklch(0 0 0);
    --primary: var(--brand);
    --primary-foreground: #ffffff;
    --secondary: oklch(0.94 0 0);
    --secondary-foreground: oklch(0 0 0);
    --muted: var(--muted);
    --muted-foreground: var(--subtle);
    --accent: #e9c46a;
    --accent-foreground: #000000;
    --destructive: oklch(0.63 0.19 23.03);
    --destructive-foreground: oklch(1 0 0);
    --border: oklch(0.92 0 0);
    --input: oklch(0.94 0 0);
    --radius: 0.5rem;
    --font-sans: var(--font-inter), system-ui, sans-serif;
    --font-serif: var(--font-geist), Georgia, serif;
    --font-mono: Geist Mono, monospace;
  }

  html { scroll-behavior: smooth; }
  
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.5;
    overflow-x: hidden;
  }
}

/* ===== COMPONENT STYLES ===== */
@layer components {
  .section {
    @apply relative mx-auto max-w-7xl px-4 sm:px-6 md:px-8 py-16 sm:py-20 md:py-24;
  }

  .card {
    @apply bg-white/80 backdrop-blur-sm rounded-2xl border border-white/50 shadow-lg hover:shadow-xl transition-shadow;
  }

  .header-glass {
    @apply sticky top-0 z-50 bg-white/30 supports-[backdrop-filter]:bg-white/20 backdrop-blur-lg border-b border-white/40;
    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
  }

  .headline-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-charcoal-200 via-charcoal-600 to-charcoal-800;
    padding-bottom: 0.06em;
  }

  .btn-shine {
    position: relative;
    overflow: hidden;
  }
  .btn-shine::after {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-120%);
    background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,.35) 50%, transparent 100%);
    transition: transform .8s ease;
  }
  .btn-shine:hover::after { transform: translateX(120%); }

  .edge-fade-l {
    mask-image: linear-gradient(to right, transparent, #000 24%);
  }
  .edge-fade-r {
    mask-image: linear-gradient(to left, transparent, #000 24%);
  }
}

/* ===== UTILITY CLASSES ===== */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: #d1d5db #f3f4f6;
  }
  .scrollbar-thin::-webkit-scrollbar { width: 0.5rem; }
  .scrollbar-thin::-webkit-scrollbar-track { background: #f3f4f6; border-radius: 6px; }
  .scrollbar-thin::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 6px; }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar { display: none; }

  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .animate-in { animation-fill-mode: both; }
}

/* ===== HERO SECTION ===== */
.hero-section {
  position: relative;
  overflow: visible;
  height: calc(100vh - var(--header-height, 0px));
}

@supports (height: 100dvh) {
  .hero-section {
    height: calc(100dvh - var(--header-height, 0px));
  }
}

.hero-height-locked .hero-section {
  height: calc(var(--fixed-vh, 100vh) - var(--header-height, 0px)) !important;
}

.hero-section > .container {
  height: 100%;
  display: grid;
  align-content: center;
}

.hero-grid { height: 100%; }

.hero-content {
  display: flex;
  flex-direction: column;
  min-height: 0;
  transform: translateZ(0);
}

.hero-cta { margin-top: auto; }

.hero-title {
  line-height: 1.0 !important;
  padding-bottom: 0.15em !important;
}

@media (min-width: 1024px) {
  .hero-title { line-height: 0.92 !important; }
}

/* Hero image constraints */
.hero-visual img {
  width: auto;
  height: auto;
  object-fit: contain;
  max-height: clamp(160px, 32vh, 300px);
}

@media (min-width: 1024px) {
  .hero-visual img {
    max-height: clamp(250px, 40vh, 500px);
  }
}

/* Low height viewport adjustments */
@media (max-height: 700px) {
  .hero-title { font-size: clamp(1.5rem, 3vw, 2.75rem) !important; }
  .hero-cta button { font-size: clamp(0.85rem, 1.6vw, 1rem) !important; padding: 0.6rem 1.25rem !important; }
}

/* ===== HEADER RESPONSIVE ===== */
@media (max-width: 768px) {
  .header-glass { padding: 0.75rem 1rem; }
}

@media (max-width: 640px) {
  .header-glass { padding: 1rem 0rem 1rem 1rem; }
  .header-glass .logo-circle { width: 3.5rem; height: 3.5rem; }
  .header-glass button { width: 3.5rem !important; height: 3.5rem !important; }
}

/* ===== iOS SAFE AREAS ===== */
@supports (padding: max(0px)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
  }
  header { padding-top: max(env(safe-area-inset-top), 1rem); }
  footer { padding-bottom: max(env(safe-area-inset-bottom), 1rem); }
}

/* ===== FORM INPUTS ===== */
input[type="text"], input[type="email"], input[type="password"], 
input[type="search"], input[type="tel"], input[type="number"],
textarea, [contenteditable="true"] {
  cursor: text;
  caret-color: auto;
}

button, a, [role="button"] { cursor: pointer; }
button:disabled, input:disabled, [aria-disabled="true"] { cursor: not-allowed; }

/* ===== FONT CLASS ===== */
.instrument { font-family: var(--font-instrument-serif), serif; }
