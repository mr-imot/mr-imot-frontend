@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== DESIGN TOKENS ===== */
@layer base {
  :root {
    --brand: #264653;
    --brand-ink: #ffffff;
    --ink: #111111;
    --subtle: #6B7280;
    --muted: #F4F5F7;
    --ring: rgba(17,24,39,.35);
    --shadow-card: 0 8px 24px rgba(0,0,0,.08);
    --shadow-hover: 0 12px 28px rgba(0,0,0,.12);
    
    /* ShadCN variables */
    --background: oklch(0.99 0 0);
    --foreground: var(--ink);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0 0 0);
    --popover: oklch(0.99 0 0);
    --popover-foreground: oklch(0 0 0);
    --primary: var(--brand);
    --primary-foreground: #ffffff;
    --secondary: oklch(0.94 0 0);
    --secondary-foreground: oklch(0 0 0);
    --muted-foreground: var(--subtle);
    --accent: #e9c46a;
    --accent-foreground: #000000;
    --destructive: oklch(0.63 0.19 23.03);
    --destructive-foreground: oklch(1 0 0);
    --border: oklch(0.92 0 0);
    --input: oklch(0.94 0 0);
    --radius: 0.5rem;
    --font-sans: var(--font-geist), system-ui, sans-serif;
    --font-serif: var(--font-geist), Georgia, serif;
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    
    /* Viewport lock defaults - prevent layout shift before JS loads */
    --header-height: 80px; /* Approximate initial value */
    --fixed-vh: 100svh;    /* Best pure-CSS guess */
  }

  /* Removed scroll-behavior: smooth - conflicts with Next.js navigation */
  
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.5;
    overflow-x: hidden;
  }
}

/* ===== COMPONENT STYLES ===== */
@layer components {
}

/* ===== UTILITY CLASSES ===== */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: #d1d5db #f3f4f6;
  }
  .scrollbar-thin::-webkit-scrollbar { width: 0.5rem; }
  .scrollbar-thin::-webkit-scrollbar-track { background: #f3f4f6; border-radius: 6px; }
  .scrollbar-thin::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 6px; }
  
  .scrollbar-medium {
    scrollbar-width: auto;
    scrollbar-color: #9ca3af #f3f4f6;
  }
  .scrollbar-medium::-webkit-scrollbar { 
    width: 0.75rem; 
    height: 0.875rem; 
  }
  .scrollbar-medium::-webkit-scrollbar-track { 
    background: #f3f4f6; 
    border-radius: 8px; 
  }
  .scrollbar-medium::-webkit-scrollbar-thumb { 
    background: #9ca3af; 
    border-radius: 8px; 
    border: 2px solid #f3f4f6;
  }
  .scrollbar-medium::-webkit-scrollbar-thumb:hover { 
    background: #6b7280; 
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar { display: none; }

  /* DO NOT REMOVE: Accessibility utility, future-proof */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .animate-in { animation-fill-mode: both; }
}


/* ===== iOS SAFE AREAS ===== */
@supports (padding: max(0px)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
  }
  header { padding-top: max(env(safe-area-inset-top), 1rem); }
  footer { padding-bottom: max(env(safe-area-inset-bottom), 1rem); }
}

/* ===== FORM INPUTS ===== */
input[type="text"], input[type="email"], input[type="password"], 
input[type="search"], input[type="tel"], input[type="number"],
textarea, [contenteditable="true"] {
  cursor: text;
  caret-color: auto;
}

button, a, [role="button"] { cursor: pointer; }
button:disabled, input:disabled, [aria-disabled="true"] { cursor: not-allowed; }
